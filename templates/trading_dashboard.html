<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradingBOT Dashboard</title>
    <meta name="description" content="Advanced AI-powered trading dashboard with real-time portfolio management and agentic AI system">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    
    <!-- Chart.js for visualizations - UMD build -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0"></script>
    
    <style>
        :root {
            /* Exact color scheme from screenshots */
            --bg-primary: #0d1421;
            --bg-secondary: #1a2332;
            --bg-tertiary: #242e3d;
            --bg-card: #1e2936;
            --bg-sidebar: #182029;
            --border-color: #2d3748;
            --border-light: #374151;
            
            /* Text colors */
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --text-accent: #60a5fa;
            
            /* Status colors */
            --color-success: #22c55e;
            --color-warning: #f59e0b;
            --color-danger: #ef4444;
            --color-info: #3b82f6;
            --color-active: #06d6a0;
            --color-training: #ff6b35;
            
            /* Blue theme colors */
            --blue-primary: #3b82f6;
            --blue-secondary: #1d4ed8;
            --blue-light: #60a5fa;
            --blue-dark: #1e40af;
            
            /* Cyan/Teal for agents */
            --cyan-primary: #06b6d4;
            --cyan-light: #67e8f9;
            --cyan-dark: #0891b2;
            
            /* Layout */
            --sidebar-width: 240px;
            --header-height: 65px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.5;
        }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,.2);
            border-radius: 50%;
            border-top-color: var(--blue-primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .skeleton {
            background: linear-gradient(90deg, #2d3748 25%, #374151 50%, #2d3748 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 4px;
            min-height: 20px;
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Dashboard Layout */
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar - Exact replica with collapsible sections */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            z-index: 999;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--cyan-primary), var(--blue-primary));
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
        }

        .logo-text {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Navigation Menu */
        .nav-menu {
            padding: 0;
        }

        .nav-section {
            margin-bottom: 8px;
        }

        /* Section Headers (ANALYTICS, CONTROL) */
        .nav-section-header {
            padding: 8px 20px;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 16px;
            margin-bottom: 4px;
        }

        /* Main navigation items */
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            border-left: 3px solid transparent;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
            color: var(--blue-light);
            border-left-color: var(--blue-primary);
        }

        .nav-item.active.agentic {
            color: var(--cyan-light);
            border-left-color: var(--cyan-primary);
            background: rgba(6, 182, 212, 0.1);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .nav-badge {
            background: var(--color-danger);
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: 600;
            margin-left: auto;
            min-width: 16px;
            text-align: center;
        }

        /* Dropdown arrow for expandable items */
        .nav-dropdown-arrow {
            margin-left: auto;
            font-size: 12px;
            color: var(--text-muted);
            transition: transform 0.2s ease;
        }

        .nav-item.expanded .nav-dropdown-arrow {
            transform: rotate(90deg);
        }

        /* Collapsible sub-items container */
        .nav-subitems {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: rgba(0, 0, 0, 0.1);
        }

        .nav-subitems.expanded {
            max-height: 500px;
        }

        .nav-subitem {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px 10px 52px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 13px;
            font-weight: 400;
        }

        .nav-subitem:hover {
            color: var(--text-secondary);
            background: rgba(59, 130, 246, 0.05);
        }

        .nav-subitem.active {
            color: var(--blue-light);
            background: rgba(59, 130, 246, 0.1);
        }

        /* Header - Exact replica */
        .header {
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            height: var(--header-height);
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header.collapsed {
            left: 0;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .hamburger-menu {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 20px;
            height: 16px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .hamburger-menu span {
            width: 100%;
            height: 2px;
            background: var(--text-primary);
            border-radius: 1px;
            transition: all 0.3s ease;
        }

        .dashboard-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-accent);
        }

        .dashboard-logo-icon {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--cyan-primary), var(--blue-primary));
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-secondary);
            margin-left: 16px;
        }

        .breadcrumb-separator {
            color: var(--text-muted);
        }

        .breadcrumb .current {
            color: var(--text-accent);
            font-weight: 500;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .mode-selector {
            display: flex;
            background: var(--bg-tertiary);
            border-radius: 6px;
            padding: 2px;
            border: 1px solid var(--border-light);
        }

        .mode-option {
            padding: 6px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            border: none;
            background: none;
            text-transform: uppercase;
        }

        .mode-option.active {
            color: white;
        }

        .mode-option.demo.active {
            background: var(--blue-primary);
            box-shadow: 0 1px 3px rgba(59, 130, 246, 0.4);
        }

        .mode-option.live.active {
            background: var(--color-success);
            box-shadow: 0 1px 3px rgba(34, 197, 94, 0.4);
        }

        .status-indicators {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-success);
            box-shadow: 0 0 6px rgba(34, 197, 94, 0.4);
        }

        .status-dot.warning {
            background: var(--color-warning);
            box-shadow: 0 0 6px rgba(245, 158, 11, 0.4);
        }

        .status-dot.error {
            background: var(--color-danger);
            box-shadow: 0 0 6px rgba(239, 68, 68, 0.4);
        }

        .demo-mode-badge {
            background: var(--blue-primary);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: 24px;
            background: var(--bg-primary);
            min-height: calc(100vh - var(--header-height));
            transition: all 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 24px;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard Overview Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s ease;
            position: relative;
        }

        .metric-card:hover {
            border-color: var(--border-light);
        }

        .metric-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .metric-badge {
            background: var(--blue-primary);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-badge.success {
            background: var(--color-success);
        }

        .metric-badge.warning {
            background: var(--color-warning);
        }

        .metric-badge.error {
            background: var(--color-danger);
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            line-height: 1;
        }

        .metric-change {
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .metric-change.positive {
            color: var(--color-success);
        }

        .metric-change.negative {
            color: var(--color-danger);
        }

        .metric-change.neutral {
            color: var(--text-secondary);
        }

        /* Chart Card */
        .chart-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chart-controls {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .chart-period {
            padding: 6px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: transparent;
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .chart-period:hover {
            border-color: var(--blue-primary);
            color: var(--blue-light);
        }

        .chart-period.active {
            border-color: var(--blue-primary);
            color: var(--blue-primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .header {
                left: 0;
            }
            .main-content {
                margin-left: 0;
                padding: 16px;
            }
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Utility classes */
        .text-positive { color: var(--color-success); }
        .text-negative { color: var(--color-danger); }
        .text-neutral { color: var(--text-secondary); }
        .text-muted { color: var(--text-muted); }
        .text-primary { color: var(--text-primary); }
        .text-accent { color: var(--text-accent); }

        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 8px; }
        .mb-2 { margin-bottom: 16px; }
        .mb-3 { margin-bottom: 24px; }

        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar - Exact replica with collapsible dropdowns -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-icon">ü§ñ</div>
                    <div class="logo-text">TradingBOT</div>
                </div>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-section">
                    <a href="#" class="nav-item active" data-section="overview">
                        <div class="nav-icon">üìä</div>
                        <span>Trading Overview</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-section="live-trading">
                        <div class="nav-icon">‚ö°</div>
                        <span>Live Trading</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-section="portfolio">
                        <div class="nav-icon">üíº</div>
                        <span>Portfolio</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-section="market-data">
                        <div class="nav-icon">üìà</div>
                        <span>Market Data</span>
                    </a>
                </div>

                <!-- ANALYTICS Section -->
                <div class="nav-section-header">ANALYTICS</div>
                <div class="nav-section">
                    <!-- AI & Analytics - Collapsible -->
                    <a href="#" class="nav-item dropdown-parent" data-section="ai-analytics">
                        <div class="nav-icon">üß†</div>
                        <span>AI & Analytics</span>
                        <span class="nav-badge" id="ai-alerts">0</span>
                        <span class="nav-dropdown-arrow">‚ñ∂</span>
                    </a>
                    
                    <div class="nav-subitems" id="ai-analytics-subitems">
                        <a href="#" class="nav-subitem" data-section="ai-models">
                            <span>AI Models</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="backtesting">
                            <span>Backtesting</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="analytics">
                            <span>Analytics</span>
                        </a>
                    </div>
                    
                    <!-- Agentic AI - Collapsible -->
                    <a href="#" class="nav-item dropdown-parent agentic" data-section="agentic-ai">
                        <div class="nav-icon">ü§ñ</div>
                        <span>Agentic AI</span>
                        <span class="nav-badge" id="agent-alerts">0</span>
                        <span class="nav-dropdown-arrow">‚ñ∂</span>
                    </a>
                    
                    <div class="nav-subitems" id="agentic-ai-subitems">
                        <a href="#" class="nav-subitem" data-section="agent-network">
                            <span>Agent Network</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="resource-manager">
                            <span>Resource Manager</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="agent-performance">
                            <span>Agent Performance</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="communication">
                            <span>Communication</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="learning-center">
                            <span>Learning Center</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="decision-pipeline">
                            <span>Decision Pipeline</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="agent-health">
                            <span>Agent Health</span>
                        </a>
                    </div>
                </div>

                <!-- CONTROL Section -->
                <div class="nav-section-header">CONTROL</div>
                <div class="nav-section">
                    <!-- System Control - Collapsible -->
                    <a href="#" class="nav-item dropdown-parent" data-section="system-control">
                        <div class="nav-icon">‚öôÔ∏è</div>
                        <span>System Control</span>
                        <span class="nav-badge" id="system-alerts">0</span>
                        <span class="nav-dropdown-arrow">‚ñ∂</span>
                    </a>
                    
                    <div class="nav-subitems" id="system-control-subitems">
                        <a href="#" class="nav-subitem" data-section="system-monitor">
                            <span>System Monitor</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="demo-settings">
                            <span>Demo Settings</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="risk-management">
                            <span>Risk Management</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="configuration">
                            <span>Configuration</span>
                        </a>
                        <a href="#" class="nav-subitem" data-section="alert-management">
                            <span>Alert Management</span>
                        </a>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Header - Exact replica -->
        <div class="header" id="header">
            <div class="header-left">
                <div class="hamburger-menu" id="hamburger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <div class="dashboard-logo">
                    <div class="dashboard-logo-icon">ü§ñ</div>
                    <span>TradingBOT Dashboard</span>
                </div>
                
                <div class="breadcrumb">
                    <span>Trading Overview</span>
                    <span class="breadcrumb-separator">‚Ä∫</span>
                    <span class="current" id="current-page">Dashboard</span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="mode-selector">
                    <button class="mode-option demo active" data-mode="demo">Demo</button>
                    <button class="mode-option live" data-mode="live">Live</button>
                </div>
                
                <div class="demo-mode-badge" id="mode-indicator">Demo Mode</div>
                
                <div class="status-indicators">
                    <div class="status-indicator">
                        <div class="status-dot" id="system-status-dot"></div>
                        <span id="system-status-text">System Healthy</span>
                    </div>
                    
                    <div class="status-indicator">
                        <div class="status-dot" id="market-status-dot"></div>
                        <span id="market-status-text">Live Market</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="main-content">
            <!-- Trading Overview Section -->
            <section id="overview" class="section active">
                <h1 class="page-title">Trading Dashboard</h1>

                <!-- Key Metrics Grid -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Total Portfolio Value</div>
                            <div class="metric-badge" id="practice-mode-badge">Practice Mode</div>
                        </div>
                        <div class="metric-value" id="portfolio-value">
                            <div class="loading"></div>
                        </div>
                        <div class="metric-change" id="portfolio-change">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Daily P&L (Hypothetical)</div>
                        </div>
                        <div class="metric-value" id="daily-pnl">
                            <div class="loading"></div>
                        </div>
                        <div class="metric-change" id="daily-pnl-change">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Active Positions</div>
                        </div>
                        <div class="metric-value" id="active-positions">
                            <div class="loading"></div>
                        </div>
                        <div class="metric-change" id="positions-status">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">AI Confidence</div>
                        </div>
                        <div class="metric-value" id="ai-confidence">
                            <div class="loading"></div>
                        </div>
                        <div class="metric-change" id="confidence-level">Loading...</div>
                    </div>
                </div>

                <!-- Portfolio Performance Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">
                            üìä Portfolio Performance
                        </div>
                        <div class="chart-controls">
                            <button class="chart-period" data-period="1D">1D</button>
                            <button class="chart-period active" data-period="1W">1W</button>
                            <button class="chart-period" data-period="1M">1M</button>
                            <button class="chart-period" data-period="3M">3M</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="portfolio-chart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Live Trading Section -->
            <section id="live-trading" class="section">
                <h1 class="page-title">Live Trading</h1>
                <p>Live trading controls and execution interface...</p>
            </section>

            <!-- Portfolio Section -->
            <section id="portfolio" class="section">
                <h1 class="page-title">Portfolio</h1>
                <p>Portfolio management and analysis...</p>
            </section>

            <!-- Market Data Section -->
            <section id="market-data" class="section">
                <h1 class="page-title">Market Data</h1>
                <p>Real-time market data and analytics...</p>
            </section>

            <!-- AI Analytics Section -->
            <section id="ai-analytics" class="section">
                <h1 class="page-title">AI & Analytics</h1>
                <p>AI model performance and analytics overview...</p>
            </section>

            <!-- AI Models Section -->
            <section id="ai-models" class="section">
                <h1 class="page-title">AI Models</h1>
                <p>Individual AI model configurations and performance...</p>
            </section>

            <!-- Backtesting Section -->
            <section id="backtesting" class="section">
                <h1 class="page-title">Backtesting</h1>
                <p>Strategy backtesting and historical analysis...</p>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="section">
                <h1 class="page-title">Analytics</h1>
                <p>Advanced analytics and reporting...</p>
            </section>

            <!-- Agentic AI Section -->
            <section id="agentic-ai" class="section">
                <h1 class="page-title">Agentic AI</h1>
                <p>Agentic AI system overview...</p>
            </section>

            <!-- Agent Network Section -->
            <section id="agent-network" class="section">
                <h1 class="page-title">Agent Network</h1>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Risk Management Agent</div>
                            <div class="metric-badge" id="risk-agent-status">Initializing</div>
                        </div>
                        <div class="metric-value" id="risk-agent-tasks">0</div>
                        <div class="metric-change" id="risk-agent-metrics">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Monitoring Agent</div>
                            <div class="metric-badge" id="monitoring-agent-status">Initializing</div>
                        </div>
                        <div class="metric-value" id="monitoring-agent-tasks">0</div>
                        <div class="metric-change" id="monitoring-agent-metrics">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Execution Agent</div>
                            <div class="metric-badge" id="execution-agent-status">Initializing</div>
                        </div>
                        <div class="metric-value" id="execution-agent-tasks">0</div>
                        <div class="metric-change" id="execution-agent-metrics">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Portfolio Agent</div>
                            <div class="metric-badge" id="portfolio-agent-status">Initializing</div>
                        </div>
                        <div class="metric-value" id="portfolio-agent-tasks">0</div>
                        <div class="metric-change" id="portfolio-agent-metrics">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Market Analysis Agent</div>
                            <div class="metric-badge" id="market-agent-status">Initializing</div>
                        </div>
                        <div class="metric-value" id="market-agent-tasks">0</div>
                        <div class="metric-change" id="market-agent-metrics">Loading...</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-label">Learning Agent</div>
                            <div class="metric-badge" id="learning-agent-status">Initializing</div>
                        </div>
                        <div class="metric-value" id="learning-agent-tasks">0</div>
                        <div class="metric-change" id="learning-agent-metrics">Loading...</div>
                    </div>
                </div>
            </section>

            <!-- System Control Section -->
            <section id="system-control" class="section">
                <h1 class="page-title">System Control</h1>
                <p>System control and configuration...</p>
            </section>

            <!-- System Monitor Section -->
            <section id="system-monitor" class="section">
                <h1 class="page-title">System Monitor</h1>
                <p>System performance monitoring...</p>
            </section>

            <!-- Other sections can be added here -->
        </div>
    </div>

    <!-- Dashboard Configuration from Backend -->
    <script>
        // Dashboard Configuration from Backend
        window.DASHBOARD_CONFIG = {
            apiBaseUrl: "{{ api_base_url }}",
            currentMode: "{{ current_mode }}",
            wsUrl: "{{ websocket_url }}",
            agentCount: {{ agent_count }},
            systemHealth: "{{ system_health }}",
            updateIntervals: {{ update_intervals | tojson }},
            chartConfig: {{ chart_config | tojson }}
        };
    </script>

    <script>
        // Dashboard State Management
        class TradingDashboard {
            constructor() {
                console.log('üèóÔ∏è TradingDashboard Constructor - Starting initialization');
                // Use config injected from backend
                this.config = window.DASHBOARD_CONFIG;
                this.currentMode = this.config.currentMode || 'demo';
                this.currentSection = 'overview';
                this.isConnected = false;
                this.data = {};
                this.charts = {};
                this.intervals = {};
                this.resilience = new DashboardResilience(this);
                
                // DEBUG: Check for debug mode from URL parameter
                this.debugMode = this.getUrlParameter('debug') === '1';
                if (this.debugMode) {
                    console.log('üêõ DEBUG MODE ENABLED - Using mock data');
                }
                
                this.init();
            }
            
            getUrlParameter(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }

            init() {
                this.initializeNavigation();
                this.initializeDropdowns();
                this.initializeCharts();
                this.loadInitialData();
                this.startRealTimeUpdates();
                this.initializeWebSocket();
                
                console.log('üöÄ TradingBOT Dashboard initialized');
            }

            // Navigation
            initializeNavigation() {
                // Hamburger menu
                document.getElementById('hamburger-menu')?.addEventListener('click', this.toggleSidebar.bind(this));

                // Regular nav items
                document.querySelectorAll('.nav-item:not(.dropdown-parent)').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = item.getAttribute('data-section');
                        if (section) {
                            this.switchSection(section);
                        }
                    });
                });

                // Sub nav items
                document.querySelectorAll('.nav-subitem').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = item.getAttribute('data-section');
                        if (section) {
                            this.switchSection(section);
                        }
                    });
                });

                // Mode toggle
                document.querySelectorAll('.mode-option').forEach(option => {
                    option.addEventListener('click', () => {
                        const mode = option.getAttribute('data-mode');
                        this.switchMode(mode);
                    });
                });

                // Chart period controls
                document.querySelectorAll('.chart-period').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.chart-period').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        const period = btn.getAttribute('data-period');
                        this.updateChartPeriod(period);
                    });
                });
            }

            // Initialize dropdown functionality
            initializeDropdowns() {
                const dropdownParents = document.querySelectorAll('.dropdown-parent');
                
                dropdownParents.forEach(parent => {
                    parent.addEventListener('click', (e) => {
                        e.preventDefault();
                        
                        // Toggle the dropdown
                        const isExpanded = parent.classList.contains('expanded');
                        const section = parent.getAttribute('data-section');
                        const subitems = document.getElementById(`${section}-subitems`);
                        
                        if (!isExpanded) {
                            // Expand this dropdown
                            parent.classList.add('expanded');
                            subitems?.classList.add('expanded');
                        } else {
                            // Collapse this dropdown
                            parent.classList.remove('expanded');
                            subitems?.classList.remove('expanded');
                        }
                    });
                });
            }

            toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('main-content');
                const header = document.getElementById('header');
                
                sidebar?.classList.toggle('collapsed');
                mainContent?.classList.toggle('expanded');
                header?.classList.toggle('collapsed');
            }

            switchSection(sectionId) {
                // Update navigation - clear all active states first
                document.querySelectorAll('.nav-item, .nav-subitem').forEach(item => item.classList.remove('active'));
                
                // Set active state for the clicked item
                const clickedItem = document.querySelector(`[data-section="${sectionId}"]`);
                if (clickedItem) {
                    clickedItem.classList.add('active');
                    
                    // If it's a subitem, also expand and activate its parent
                    if (clickedItem.classList.contains('nav-subitem')) {
                        const parentDropdown = clickedItem.closest('.nav-section').querySelector('.dropdown-parent');
                        const parentSubitems = clickedItem.closest('.nav-subitems');
                        
                        if (parentDropdown && parentSubitems) {
                            parentDropdown.classList.add('expanded');
                            parentSubitems.classList.add('expanded');
                        }
                    }
                }
                
                // Update sections
                document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
                document.getElementById(sectionId)?.classList.add('active');
                
                // Update breadcrumb
                const titles = {
                    'overview': 'Dashboard',
                    'live-trading': 'Live Trading',
                    'portfolio': 'Portfolio',
                    'market-data': 'Market Data',
                    'ai-analytics': 'AI & Analytics',
                    'ai-models': 'AI Models',
                    'backtesting': 'Backtesting',
                    'analytics': 'Analytics',
                    'agentic-ai': 'Agentic AI',
                    'agent-network': 'Agent Network',
                    'resource-manager': 'Resource Manager',
                    'agent-performance': 'Agent Performance',
                    'communication': 'Communication',
                    'learning-center': 'Learning Center',
                    'decision-pipeline': 'Decision Pipeline',
                    'agent-health': 'Agent Health',
                    'system-control': 'System Control',
                    'system-monitor': 'System Monitor',
                    'demo-settings': 'Demo Settings',
                    'risk-management': 'Risk Management',
                    'configuration': 'Configuration',
                    'alert-management': 'Alert Management'
                };
                
                document.getElementById('current-page').textContent = titles[sectionId] || 'Dashboard';
                
                this.currentSection = sectionId;
            }

            async switchMode(mode) {
                if (mode === 'live' && this.currentMode === 'demo') {
                    if (!confirm('Switch to Live Trading mode? This will use real money.')) {
                        return;
                    }
                }

                this.currentMode = mode;
                
                // Update UI
                document.querySelectorAll('.mode-option').forEach(option => option.classList.remove('active'));
                document.querySelector(`[data-mode="${mode}"]`)?.classList.add('active');
                
                // Update mode indicator
                const modeIndicator = document.getElementById('mode-indicator');
                if (modeIndicator) {
                    modeIndicator.textContent = mode === 'demo' ? 'Demo Mode' : 'Live Mode';
                    modeIndicator.style.background = mode === 'demo' ? 'var(--blue-primary)' : 'var(--color-success)';
                }
                
                // Update practice mode badge
                const badge = document.getElementById('practice-mode-badge');
                if (badge) {
                    badge.textContent = mode === 'demo' ? 'Practice Mode' : 'Live Mode';
                    badge.className = mode === 'demo' ? 'metric-badge' : 'metric-badge success';
                }
                
                await this.loadInitialData();
            }

            // Data Loading with Real API
            async loadInitialData() {
                console.log('üöÄ Starting initial data load...'); // Debug log
                try {
                    console.log('Loading portfolio data...'); // Debug log
                    await this.loadPortfolioData();
                    
                    console.log('Loading agent data...'); // Debug log
                    await this.loadAgentData();
                    
                    this.updateConnectionStatus(true);
                } catch (error) {
                    this.updateConnectionStatus(false);
                    console.error('Data loading failed:', error);
                }
            }

            async loadPortfolioData() {
                try {
                    // DEBUG: Use mock data if debug mode is enabled
                    if (this.debugMode) {
                        console.log('üêõ DEBUG MODE: Using mock portfolio data');
                        const mockResponse = {
                            portfolio: {
                                total_value: 125000.50,
                                daily_pnl: 1250.75,
                                daily_pnl_percent: 1.01,
                                total_pnl: 25000.50,
                                total_pnl_percent: 25.0,
                                win_rate: 68.5,
                                total_trades: 45,
                                winning_trades: 31
                            },
                            positions: [
                                { symbol: "AAPL", quantity: 100, market_value: 15550.00, unrealized_pnl: 525.00 },
                                { symbol: "TSLA", quantity: 50, market_value: 9787.50, unrealized_pnl: -212.50 }
                            ],
                            risk_metrics: {
                                portfolio_var: 2500.00,
                                sharpe_ratio: 1.85,
                                volatility: 18.5
                            },
                            ai_confidence: 87.5,
                            mode: this.currentMode,
                            debug: "FRONTEND_MOCK_DATA"
                        };
                        
                        const portfolioData = {
                            total_value: mockResponse.portfolio.total_value,
                            daily_pnl: mockResponse.portfolio.daily_pnl,
                            daily_pnl_percent: mockResponse.portfolio.daily_pnl_percent,
                            positions: mockResponse.positions.length,
                            ai_confidence: mockResponse.ai_confidence
                        };
                        
                        console.log('üêõ Mock portfolio data:', portfolioData);
                        this.updatePortfolioDisplay(portfolioData);
                        return;
                    }
                    
                    console.log(`Loading portfolio data for mode: ${this.currentMode}`);
                    const response = await this.resilience.safeApiCall(
                        `${this.config.apiBaseUrl}/api/dashboard/trading/${this.currentMode}`
                    );
                    
                    console.log('Portfolio API response:', response);
                    console.log('Response type:', typeof response);
                    console.log('Response keys:', response ? Object.keys(response) : 'null');
                    
                    if (response && response.portfolio) {
                        console.log('Portfolio data found:', response.portfolio);
                        // Extract portfolio data from nested structure
                        const portfolioData = {
                            total_value: response.portfolio.total_value || 0,
                            daily_pnl: response.portfolio.daily_pnl || 0,
                            daily_pnl_percent: response.portfolio.daily_pnl_percent || 0,
                            positions: response.positions ? response.positions.length : 0,
                            ai_confidence: response.ai_confidence || 0
                        };
                        console.log('Extracted portfolio data:', portfolioData);
                        this.updatePortfolioDisplay(portfolioData);
                    } else {
                        console.warn('No portfolio data in response:', response);
                    }
                } catch (error) {
                    console.error('Failed to load portfolio data:', error);
                    console.error('Error details:', {
                        message: error.message,
                        stack: error.stack,
                        name: error.name
                    });
                }
            }

            async loadAgentData() {
                try {
                    // DEBUG: Use mock data if debug mode is enabled
                    if (this.debugMode) {
                        console.log('üêõ DEBUG MODE: Using mock agent data');
                        const mockAgents = {
                            "market_analysis_agent": {
                                "status": "ACTIVE",
                                "priority": "CRITICAL",
                                "last_activity": new Date().toISOString(),
                                "performance": 95.5
                            },
                            "portfolio_management_agent": {
                                "status": "ACTIVE", 
                                "priority": "CRITICAL",
                                "last_activity": new Date().toISOString(),
                                "performance": 92.3
                            },
                            "risk_management_agent": {
                                "status": "ACTIVE",
                                "priority": "IMPORTANT", 
                                "last_activity": new Date().toISOString(),
                                "performance": 88.7
                            },
                            "execution_agent": {
                                "status": "IDLE",
                                "priority": "IMPORTANT",
                                "last_activity": new Date().toISOString(),
                                "performance": 91.2
                            },
                            "learning_agent": {
                                "status": "ACTIVE",
                                "priority": "NORMAL",
                                "last_activity": new Date().toISOString(),
                                "performance": 87.9
                            },
                            "monitoring_agent": {
                                "status": "ACTIVE",
                                "priority": "CRITICAL",
                                "last_activity": new Date().toISOString(),
                                "performance": 96.1
                            }
                        };
                        
                        console.log('üêõ Mock agent data:', mockAgents);
                        this.updateAgentDisplay(mockAgents);
                        return;
                    }
                    
                    console.log('Loading agent data from:', `${this.config.apiBaseUrl}/api/dashboard/status`);
                    const response = await this.resilience.safeApiCall(
                        `${this.config.apiBaseUrl}/api/dashboard/status`
                    );
                    
                    console.log('Agent API response:', response);
                    console.log('Response type:', typeof response);
                    console.log('Response keys:', response ? Object.keys(response) : 'null');
                    
                    if (response && response.agents) {
                        console.log('Agent data received:', response.agents);
                        this.updateAgentDisplay(response.agents);
                    } else if (response && response.agents_status) {
                        console.log('Agent status data received:', response.agents_status);
                        this.updateAgentDisplay(response.agents_status);
                    } else {
                        console.warn('No agents data in response:', response);
                    }
                } catch (error) {
                    console.error('Failed to load agent data:', error);
                    console.error('Error details:', {
                        message: error.message,
                        stack: error.stack,
                        name: error.name
                    });
                }
            }

            // Display Updates
            updatePortfolioDisplay(data) {
                console.log('Updating portfolio display with data:', data); // Debug log
                
                // Validate data exists and is an object
                if (!data || typeof data !== 'object') {
                    console.warn('Invalid portfolio data received:', data);
                    data = {}; // Use empty object as fallback
                }
                
                // Safely extract and validate numeric values
                const totalValue = this.safeParseNumber(data.total_value, 0);
                const dailyPnl = this.safeParseNumber(data.daily_pnl, 0);
                const dailyPnlPercent = this.safeParseNumber(data.daily_pnl_percent, 0);
                const positions = this.safeParseNumber(data.positions, 0);
                const aiConfidence = this.safeParseNumber(data.ai_confidence, 0);
                
                console.log('Parsed portfolio values:', {
                    totalValue, dailyPnl, dailyPnlPercent, positions, aiConfidence
                });
                
                // Map API response properties correctly with safe values
                this.updateElement('portfolio-value', this.formatCurrency(totalValue));
                this.updateElement('daily-pnl', `${dailyPnl >= 0 ? '+' : ''}$${Math.abs(dailyPnl).toFixed(1)}`);
                this.updateElement('daily-pnl-change', `${dailyPnl >= 0 ? '‚Üó' : '‚Üò'} ${dailyPnlPercent >= 0 ? '+' : ''}${dailyPnlPercent.toFixed(2)}%`);
                
                this.updateElement('active-positions', positions);
                this.updateElement('ai-confidence', `${aiConfidence}%`);
                
                // Update classes for color coding
                this.updateElementClass('daily-pnl', dailyPnl >= 0 ? 'positive' : 'negative');
                this.updateElementClass('daily-pnl-change', dailyPnl >= 0 ? 'positive' : 'negative');
            }
            
            // Helper method to safely parse numbers
            safeParseNumber(value, defaultValue = 0) {
                if (value === null || value === undefined || value === '') {
                    return defaultValue;
                }
                const parsed = parseFloat(value);
                return isNaN(parsed) ? defaultValue : parsed;
            }

            updateAgentDisplay(agents) {
                console.log('Updating agent display with data:', agents); // Debug log
                
                // Validate agents data
                if (!agents || typeof agents !== 'object') {
                    console.warn('Invalid agents data received:', agents);
                    return;
                }
                
                const agentMappings = {
                    'risk_agent': { status: 'risk-agent-status', tasks: 'risk-agent-tasks', metrics: 'risk-agent-metrics' },
                    'monitoring_agent': { status: 'monitoring-agent-status', tasks: 'monitoring-agent-tasks', metrics: 'monitoring-agent-metrics' },
                    'execution_agent': { status: 'execution-agent-status', tasks: 'execution-agent-tasks', metrics: 'execution-agent-metrics' },
                    'portfolio_agent': { status: 'portfolio-agent-status', tasks: 'portfolio-agent-tasks', metrics: 'portfolio-agent-metrics' },
                    'market_analysis_agent': { status: 'market-agent-status', tasks: 'market-agent-tasks', metrics: 'market-agent-metrics' },
                    'learning_agent': { status: 'learning-agent-status', tasks: 'learning-agent-tasks', metrics: 'learning-agent-metrics' }
                };

                for (const [agentId, agentData] of Object.entries(agents)) {
                    console.log(`Processing agent: ${agentId}`, agentData);
                    
                    const mapping = agentMappings[agentId];
                    if (mapping && agentData) {
                        // Update status badge
                        const statusElement = document.getElementById(mapping.status);
                        if (statusElement) {
                            const status = agentData.status || 'Unknown';
                            statusElement.textContent = status;
                            statusElement.className = `metric-badge ${status === 'active' ? 'success' : 'warning'}`;
                            console.log(`Updated ${agentId} status to: ${status}`);
                        } else {
                            console.warn(`Status element not found for agent: ${agentId}`);
                        }

                        // Update task count
                        const tasksElement = document.getElementById(mapping.tasks);
                        if (tasksElement) {
                            const taskCount = this.safeParseNumber(agentData.metrics?.tasks_completed, 0);
                            tasksElement.textContent = taskCount;
                            console.log(`Updated ${agentId} tasks to: ${taskCount}`);
                        } else {
                            console.warn(`Tasks element not found for agent: ${agentId}`);
                        }

                        // Update metrics
                        const metricsElement = document.getElementById(mapping.metrics);
                        if (metricsElement) {
                            const successRate = agentData.metrics?.success_rate || 0;
                            metricsElement.textContent = `Success: ${(successRate * 100).toFixed(1)}%`;
                        }
                    }
                }
            }

            updateConnectionStatus(connected) {
                this.isConnected = connected;
                const systemDot = document.getElementById('system-status-dot');
                const systemText = document.getElementById('system-status-text');
                const marketDot = document.getElementById('market-status-dot');
                const marketText = document.getElementById('market-status-text');
                
                if (systemDot && systemText) {
                    if (connected) {
                        systemDot.className = 'status-dot';
                        systemText.textContent = 'System Healthy';
                    } else {
                        systemDot.className = 'status-dot error';
                        systemText.textContent = 'System Error';
                    }
                }

                if (marketDot && marketText) {
                    marketDot.className = 'status-dot';
                    marketText.textContent = 'Live Market';
                }
            }

            // WebSocket Connection
            initializeWebSocket() {
                if (!this.config.wsUrl) {
                    console.warn('WebSocket URL not configured');
                    return;
                }

                const ws = new WebSocket(this.config.wsUrl);
                
                ws.onopen = () => {
                    console.log('WebSocket connected successfully');
                    this.updateConnectionStatus(true);
                };
                
                ws.onmessage = (event) => {
                    try {
                        const data = JSON.parse(event.data);
                        console.log('WebSocket data received:', data);
                        
                        // DEBUG: Log echo counter for WebSocket testing
                        if (data.type === 'echo_test') {
                            console.log(`üîä WebSocket Echo #${data.counter} received at ${data.timestamp}`);
                            return;
                        }
                        
                        if (data.type === 'update') {
                            if (data.agents) {
                                this.updateAgentDisplay(data.agents);
                            }
                            if (data.portfolio) {
                                this.updatePortfolioDisplay(data.portfolio.summary || data.portfolio);
                            }
                        }
                        
                        // Handle other message types
                        if (data.type === 'agents') {
                            this.updateAgentDisplay(data.data);
                        }
                        if (data.type === 'portfolio') {
                            this.updatePortfolioDisplay(data.data);
                        }
                        if (data.type === 'error') {
                            console.error('WebSocket error message:', data.message);
                        }
                    } catch (error) {
                        console.error('WebSocket message parse error:', error);
                    }
                };
                
                ws.onerror = (error) => {
                    console.error('WebSocket error:', error);
                    this.updateConnectionStatus(false);
                };
                
                ws.onclose = () => {
                    console.log('WebSocket disconnected. Reconnecting in 3s...');
                    setTimeout(() => this.initializeWebSocket(), 3000);
                };
            }

            // Chart Management
            initializeCharts() {
                this.initPortfolioChart();
            }

            initPortfolioChart() {
                const ctx = document.getElementById('portfolio-chart');
                if (!ctx) {
                    console.warn('Portfolio chart canvas element not found');
                    return;
                }

                // Check if Chart.js is available
                if (typeof Chart === 'undefined') {
                    console.error('Chart.js is not loaded. Please check the CDN links.');
                    return;
                }

                console.log('Initializing portfolio chart with Chart.js version:', Chart.version);
                this.charts.portfolio = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Portfolio Value',
                            data: [],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(30, 41, 59, 0.95)',
                                titleColor: '#ffffff',
                                bodyColor: '#94a3b8',
                                borderColor: 'rgba(255, 255, 255, 0.1)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                display: true,
                                grid: { color: 'rgba(255, 255, 255, 0.05)' },
                                ticks: { color: '#64748b' }
                            },
                            y: {
                                display: true,
                                grid: { color: 'rgba(255, 255, 255, 0.05)' },
                                ticks: {
                                    color: '#64748b',
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }

            updatePortfolioChart() {
                if (!this.charts.portfolio) return;

                // Generate realistic portfolio data
                const now = new Date();
                const labels = [];
                const data = [];
                const baseValue = 101816;
                
                for (let i = 30; i >= 0; i--) {
                    const date = new Date(now - i * 24 * 60 * 60 * 1000);
                    labels.push(date.toLocaleDateString());
                    
                    const variation = Math.sin(i * 0.2) * 200 + Math.random() * 400 - 200;
                    data.push(Math.round(baseValue + variation));
                }

                this.charts.portfolio.data.labels = labels;
                this.charts.portfolio.data.datasets[0].data = data;
                this.charts.portfolio.update('none');
            }

            updateChartPeriod(period) {
                console.log(`Updating chart for period: ${period}`);
                this.updatePortfolioChart();
            }

            // Real-time updates
            startRealTimeUpdates() {
                // Update portfolio data every 5 seconds
                this.intervals.portfolio = setInterval(() => {
                    this.loadPortfolioData();
                }, 5000);

                // Update agent data every 2 seconds
                this.intervals.agents = setInterval(() => {
                    this.loadAgentData();
                }, 2000);
            }

            // Utility functions
            updateElement(id, content) {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = content;
                    console.log(`‚úÖ Updated element ${id} with:`, content); // Debug log
                } else {
                    console.error(`‚ùå Element with id '${id}' not found in DOM`); // Debug log
                    console.log('Available elements with IDs:', Array.from(document.querySelectorAll('[id]')).map(el => el.id)); // Debug log
                }
            }

            updateElementClass(id, className) {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.remove('positive', 'negative', 'neutral');
                    element.classList.add(className);
                }
            }

            formatCurrency(amount) {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 3
                }).format(amount);
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Dashboard Resilience Class
        class DashboardResilience {
            constructor(dashboard) {
                this.dashboard = dashboard;
                this.retryAttempts = 3;
                this.retryDelay = 1000;
            }

            async safeApiCall(url, options = {}) {
                for (let attempt = 1; attempt <= this.retryAttempts; attempt++) {
                    try {
                        const response = await fetch(url, {
                            ...options,
                            headers: {
                                'Content-Type': 'application/json',
                                ...options.headers
                            }
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                        }

                        return await response.json();
                    } catch (error) {
                        console.warn(`API call attempt ${attempt} failed:`, error.message);
                        
                        if (attempt === this.retryAttempts) {
                            throw error;
                        }
                        
                        await this.dashboard.delay(this.retryDelay * attempt);
                    }
                }
            }
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ DOM Content Loaded - Initializing TradingBOT Dashboard');
            console.log('üìä Dashboard Config:', window.DASHBOARD_CONFIG);
            window.dashboard = new TradingDashboard();
        });

        // Cleanup
        window.addEventListener('beforeunload', () => {
            if (window.dashboard) {
                Object.values(window.dashboard.intervals).forEach(clearInterval);
            }
        });
    </script>
</body>
</html>