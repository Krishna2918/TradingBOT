# API Configuration for Multi-API Orchestrator
# This file configures all data source APIs for the trading system

orchestrator:
  # General settings
  max_concurrent_requests: 5
  request_timeout: 30
  retry_attempts: 3
  fallback_enabled: true
  cost_optimization: true
  quality_threshold: 0.8
  cache_duration_hours: 24

# API Sources Configuration
api_sources:
  yahoo_finance:
    name: "Yahoo Finance"
    enabled: true
    priority: 1  # Highest priority - free and reliable
    rate_limit: 600  # Requests per minute
    cost_per_request: 0.0
    reliability_score: 0.85
    data_quality_score: 0.90
    description: "Free market data from Yahoo Finance"

  alpha_vantage:
    name: "Alpha Vantage"
    enabled: true
    priority: 2
    rate_limit: 5  # Free tier: 5 per minute
    cost_per_request: 0.0
    reliability_score: 0.95
    data_quality_score: 0.95
    api_key_env: "ALPHA_VANTAGE_API_KEY"
    base_url: "https://www.alphavantage.co/query"
    description: "Professional-grade market data API"

  finnhub:
    name: "Finnhub"
    enabled: true
    priority: 3
    rate_limit: 60  # Free tier: 60 per minute
    cost_per_request: 0.0
    reliability_score: 0.90
    data_quality_score: 0.85
    api_key_env: "FINNHUB_API_KEY"
    base_url: "https://finnhub.io/api/v1"
    description: "Real-time stock data and news"

  news_api:
    name: "News API"
    enabled: true
    priority: 4
    rate_limit: 1000  # Per day
    cost_per_request: 0.0
    reliability_score: 0.80
    data_quality_score: 0.75
    api_key_env: "NEWS_API_KEY"
    base_url: "https://newsapi.org/v2"
    description: "News sentiment data source"

  reddit_api:
    name: "Reddit API"
    enabled: false  # Disabled by default
    priority: 5
    rate_limit: 100
    cost_per_request: 0.0
    reliability_score: 0.75
    data_quality_score: 0.70
    api_key_env: "REDDIT_CLIENT_ID"
    description: "Social sentiment from Reddit"

# Symbol Priority Configuration
symbol_priorities:
  high_priority:
    - "RY.TO"    # Royal Bank of Canada
    - "TD.TO"    # Toronto-Dominion Bank
    - "BNS.TO"   # Bank of Nova Scotia
    - "BMO.TO"   # Bank of Montreal
    - "CM.TO"    # CIBC
    - "SHOP.TO"  # Shopify

  medium_priority:
    - "CNQ.TO"   # Canadian Natural Resources
    - "SU.TO"    # Suncor Energy
    - "ENB.TO"   # Enbridge
    - "TRP.TO"   # TC Energy
    - "CVE.TO"   # Cenovus Energy

# Data Quality Settings
data_quality:
  min_data_points: 100
  max_missing_percentage: 5.0
  outlier_std_threshold: 3.0
  validate_ohlc: true
  require_volume: true

# Rate Limiting Settings
rate_limiting:
  global_rate_limit: 100  # Total requests per minute across all APIs
  backoff_multiplier: 2.0
  max_backoff_seconds: 60
  cooldown_on_error_seconds: 300

# Caching Configuration
caching:
  enabled: true
  default_ttl_seconds: 300  # 5 minutes
  max_cache_size_mb: 500
  cache_directory: "data/cache"
